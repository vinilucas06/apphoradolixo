{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///node_modules/rxjs/_esm2015/internal/observable/dom/WebSocketSubject.js","webpack:///node_modules/rxjs/_esm2015/internal/observable/dom/webSocket.js","webpack:///node_modules/rxjs/_esm2015/webSocket/index.js","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts","webpack:///src/app/services/caminhao/caminhao.service.ts"],"names":["DEFAULT_WEBSOCKET_CONFIG","url","deserializer","e","JSON","parse","data","serializer","value","stringify","WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT","WebSocketSubject","urlConfigOrSource","destination","source","config","_config","Object","assign","_output","key","hasOwnProperty","WebSocketCtor","WebSocket","Error","operator","sock","_socket","subMsg","unsubMsg","messageFilter","self","observer","next","err","error","subscription","subscribe","x","complete","unsubscribe","protocol","binaryType","socket","readyState","close","onopen","_resetState","openObserver","queue","create","send","closingObserver","undefined","code","reason","TypeError","add","onerror","onclose","closeObserver","wasClean","onmessage","subscriber","_connectSocket","observers","length","webSocket","routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","authenticationService","caminhaoService","usuarioService","caminhoes","icon","fillColor","fillOpacity","strokeWeight","scale","anchor","google","maps","Point","labelOrigin","markers","lat","lng","coordinates","LatLng","mapOptions","center","zoom","usuario","currentUser","arg","console","log","mapInitializer","map","Map","gmap","nativeElement","listarEnderecoUsuario","caminhaoStart","TrackPost","datapost","BuscarDispositivos","Server","dataServer","Session","dataSession","subject","msg","positions","i","position","marker","deviceId","color","caminhaoItem","filter","c","id","location","latitude","longitude","m","Marker","title","toString","setPosition","latLng1","latLng2","lat1","degreesToRadians","long1","lat2","long2","dLon","y","Math","sin","cos","radiansBearing","atan2","radiansToDegrees","degrees","PI","radians","ListarEndereco","user_id","index","element","addr_lat","addr_long","rotation","selector","template","CaminhaoService","httpClient","model","httpOptions","headers","get","pipe","handleError","bind","dataInicio","timeIni","dataFim","timeFim","post","put","withCredentials","body","errorResponse","ErrorEvent","message","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAKA,QAAMA,wBAAwB,GAAG;AAC7BC,SAAG,EAAE,EADwB;AAE7BC,kBAAY,EAAE,sBAACC,CAAD;AAAA,eAAOC,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACG,IAAb,CAAP;AAAA,OAFe;AAG7BC,gBAAU,EAAE,oBAACC,KAAD;AAAA,eAAWJ,IAAI,CAACK,SAAL,CAAeD,KAAf,CAAX;AAAA;AAHiB,KAAjC;AAKA,QAAME,qCAAqC,GAAG,mIAA9C;;QACaC,gB;;;;;AACT,gCAAYC,iBAAZ,EAA+BC,WAA/B,EAA4C;AAAA;;AAAA;;AACxC;;AACA,YAAID,iBAAiB,YAAY,sDAAjC,EAA6C;AACzC,gBAAKC,WAAL,GAAmBA,WAAnB;AACA,gBAAKC,MAAL,GAAcF,iBAAd;AACH,SAHD,MAIK;AACD,cAAMG,MAAM,GAAG,MAAKC,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,wBAAlB,CAA9B;AACA,gBAAKmB,OAAL,GAAe,IAAI,gDAAJ,EAAf;;AACA,cAAI,OAAOP,iBAAP,KAA6B,QAAjC,EAA2C;AACvCG,kBAAM,CAACd,GAAP,GAAaW,iBAAb;AACH,WAFD,MAGK;AACD,iBAAK,IAAIQ,GAAT,IAAgBR,iBAAhB,EAAmC;AAC/B,kBAAIA,iBAAiB,CAACS,cAAlB,CAAiCD,GAAjC,CAAJ,EAA2C;AACvCL,sBAAM,CAACK,GAAD,CAAN,GAAcR,iBAAiB,CAACQ,GAAD,CAA/B;AACH;AACJ;AACJ;;AACD,cAAI,CAACL,MAAM,CAACO,aAAR,IAAyBC,SAA7B,EAAwC;AACpCR,kBAAM,CAACO,aAAP,GAAuBC,SAAvB;AACH,WAFD,MAGK,IAAI,CAACR,MAAM,CAACO,aAAZ,EAA2B;AAC5B,kBAAM,IAAIE,KAAJ,CAAU,uCAAV,CAAN;AACH;;AACD,gBAAKX,WAAL,GAAmB,IAAI,4DAAJ,EAAnB;AACH;;AA1BuC;AA2B3C;;;;6BACIY,Q,EAAU;AACX,cAAMC,IAAI,GAAG,IAAIf,gBAAJ,CAAqB,KAAKK,OAA1B,EAAmC,KAAKH,WAAxC,CAAb;AACAa,cAAI,CAACD,QAAL,GAAgBA,QAAhB;AACAC,cAAI,CAACZ,MAAL,GAAc,IAAd;AACA,iBAAOY,IAAP;AACH;;;sCACa;AACV,eAAKC,OAAL,GAAe,IAAf;;AACA,cAAI,CAAC,KAAKb,MAAV,EAAkB;AACd,iBAAKD,WAAL,GAAmB,IAAI,4DAAJ,EAAnB;AACH;;AACD,eAAKM,OAAL,GAAe,IAAI,gDAAJ,EAAf;AACH;;;kCACSS,M,EAAQC,Q,EAAUC,a,EAAe;AACvC,cAAMC,IAAI,GAAG,IAAb;AACA,iBAAO,IAAI,sDAAJ,CAAe,UAACC,QAAD,EAAc;AAChC,gBAAI;AACAD,kBAAI,CAACE,IAAL,CAAUL,MAAM,EAAhB;AACH,aAFD,CAGA,OAAOM,GAAP,EAAY;AACRF,sBAAQ,CAACG,KAAT,CAAeD,GAAf;AACH;;AACD,gBAAME,YAAY,GAAGL,IAAI,CAACM,SAAL,CAAe,UAAAC,CAAC,EAAI;AACrC,kBAAI;AACA,oBAAIR,aAAa,CAACQ,CAAD,CAAjB,EAAsB;AAClBN,0BAAQ,CAACC,IAAT,CAAcK,CAAd;AACH;AACJ,eAJD,CAKA,OAAOJ,GAAP,EAAY;AACRF,wBAAQ,CAACG,KAAT,CAAeD,GAAf;AACH;AACJ,aAToB,EASlB,UAAAA,GAAG;AAAA,qBAAIF,QAAQ,CAACG,KAAT,CAAeD,GAAf,CAAJ;AAAA,aATe,EASU;AAAA,qBAAMF,QAAQ,CAACO,QAAT,EAAN;AAAA,aATV,CAArB;AAUA,mBAAO,YAAM;AACT,kBAAI;AACAR,oBAAI,CAACE,IAAL,CAAUJ,QAAQ,EAAlB;AACH,eAFD,CAGA,OAAOK,GAAP,EAAY;AACRF,wBAAQ,CAACG,KAAT,CAAeD,GAAf;AACH;;AACDE,0BAAY,CAACI,WAAb;AACH,aARD;AASH,WA1BM,CAAP;AA2BH;;;yCACgB;AAAA;;AAAA,8BACwC,KAAKxB,OAD7C;AAAA,cACLM,aADK,iBACLA,aADK;AAAA,cACUmB,QADV,iBACUA,QADV;AAAA,cACoBxC,GADpB,iBACoBA,GADpB;AAAA,cACyByC,UADzB,iBACyBA,UADzB;AAEb,cAAMV,QAAQ,GAAG,KAAKb,OAAtB;AACA,cAAIwB,MAAM,GAAG,IAAb;;AACA,cAAI;AACAA,kBAAM,GAAGF,QAAQ,GACb,IAAInB,aAAJ,CAAkBrB,GAAlB,EAAuBwC,QAAvB,CADa,GAEb,IAAInB,aAAJ,CAAkBrB,GAAlB,CAFJ;AAGA,iBAAK0B,OAAL,GAAegB,MAAf;;AACA,gBAAID,UAAJ,EAAgB;AACZ,mBAAKf,OAAL,CAAae,UAAb,GAA0BA,UAA1B;AACH;AACJ,WARD,CASA,OAAOvC,CAAP,EAAU;AACN6B,oBAAQ,CAACG,KAAT,CAAehC,CAAf;AACA;AACH;;AACD,cAAMiC,YAAY,GAAG,IAAI,0DAAJ,CAAiB,YAAM;AACxC,kBAAI,CAACT,OAAL,GAAe,IAAf;;AACA,gBAAIgB,MAAM,IAAIA,MAAM,CAACC,UAAP,KAAsB,CAApC,EAAuC;AACnCD,oBAAM,CAACE,KAAP;AACH;AACJ,WALoB,CAArB;;AAMAF,gBAAM,CAACG,MAAP,GAAgB,UAAC3C,CAAD,EAAO;AAAA,gBACXwB,OADW,GACC,MADD,CACXA,OADW;;AAEnB,gBAAI,CAACA,OAAL,EAAc;AACVgB,oBAAM,CAACE,KAAP;;AACA,oBAAI,CAACE,WAAL;;AACA;AACH;;AANkB,gBAOXC,YAPW,GAOM,MAAI,CAAChC,OAPX,CAOXgC,YAPW;;AAQnB,gBAAIA,YAAJ,EAAkB;AACdA,0BAAY,CAACf,IAAb,CAAkB9B,CAAlB;AACH;;AACD,gBAAM8C,KAAK,GAAG,MAAI,CAACpC,WAAnB;AACA,kBAAI,CAACA,WAAL,GAAmB,uDAAWqC,MAAX,CAAkB,UAACZ,CAAD,EAAO;AACxC,kBAAIK,MAAM,CAACC,UAAP,KAAsB,CAA1B,EAA6B;AACzB,oBAAI;AAAA,sBACQrC,UADR,GACuB,MAAI,CAACS,OAD5B,CACQT,UADR;AAEAoC,wBAAM,CAACQ,IAAP,CAAY5C,UAAU,CAAC+B,CAAD,CAAtB;AACH,iBAHD,CAIA,OAAOnC,CAAP,EAAU;AACN,wBAAI,CAACU,WAAL,CAAiBsB,KAAjB,CAAuBhC,CAAvB;AACH;AACJ;AACJ,aAVkB,EAUhB,UAACA,CAAD,EAAO;AAAA,kBACEiD,eADF,GACsB,MAAI,CAACpC,OAD3B,CACEoC,eADF;;AAEN,kBAAIA,eAAJ,EAAqB;AACjBA,+BAAe,CAACnB,IAAhB,CAAqBoB,SAArB;AACH;;AACD,kBAAIlD,CAAC,IAAIA,CAAC,CAACmD,IAAX,EAAiB;AACbX,sBAAM,CAACE,KAAP,CAAa1C,CAAC,CAACmD,IAAf,EAAqBnD,CAAC,CAACoD,MAAvB;AACH,eAFD,MAGK;AACDvB,wBAAQ,CAACG,KAAT,CAAe,IAAIqB,SAAJ,CAAc9C,qCAAd,CAAf;AACH;;AACD,oBAAI,CAACqC,WAAL;AACH,aAtBkB,EAsBhB,YAAM;AAAA,kBACGK,eADH,GACuB,MAAI,CAACpC,OAD5B,CACGoC,eADH;;AAEL,kBAAIA,eAAJ,EAAqB;AACjBA,+BAAe,CAACnB,IAAhB,CAAqBoB,SAArB;AACH;;AACDV,oBAAM,CAACE,KAAP;;AACA,oBAAI,CAACE,WAAL;AACH,aA7BkB,CAAnB;;AA8BA,gBAAIE,KAAK,IAAIA,KAAK,YAAY,4DAA9B,EAA6C;AACzCb,0BAAY,CAACqB,GAAb,CAAiBR,KAAK,CAACZ,SAAN,CAAgB,MAAI,CAACxB,WAArB,CAAjB;AACH;AACJ,WA7CD;;AA8CA8B,gBAAM,CAACe,OAAP,GAAiB,UAACvD,CAAD,EAAO;AACpB,kBAAI,CAAC4C,WAAL;;AACAf,oBAAQ,CAACG,KAAT,CAAehC,CAAf;AACH,WAHD;;AAIAwC,gBAAM,CAACgB,OAAP,GAAiB,UAACxD,CAAD,EAAO;AACpB,kBAAI,CAAC4C,WAAL;;AADoB,gBAEZa,aAFY,GAEM,MAAI,CAAC5C,OAFX,CAEZ4C,aAFY;;AAGpB,gBAAIA,aAAJ,EAAmB;AACfA,2BAAa,CAAC3B,IAAd,CAAmB9B,CAAnB;AACH;;AACD,gBAAIA,CAAC,CAAC0D,QAAN,EAAgB;AACZ7B,sBAAQ,CAACO,QAAT;AACH,aAFD,MAGK;AACDP,sBAAQ,CAACG,KAAT,CAAehC,CAAf;AACH;AACJ,WAZD;;AAaAwC,gBAAM,CAACmB,SAAP,GAAmB,UAAC3D,CAAD,EAAO;AACtB,gBAAI;AAAA,kBACQD,YADR,GACyB,MAAI,CAACc,OAD9B,CACQd,YADR;AAEA8B,sBAAQ,CAACC,IAAT,CAAc/B,YAAY,CAACC,CAAD,CAA1B;AACH,aAHD,CAIA,OAAO+B,GAAP,EAAY;AACRF,sBAAQ,CAACG,KAAT,CAAeD,GAAf;AACH;AACJ,WARD;AASH;;;mCACU6B,U,EAAY;AAAA;;AAAA,cACXjD,MADW,GACA,IADA,CACXA,MADW;;AAEnB,cAAIA,MAAJ,EAAY;AACR,mBAAOA,MAAM,CAACuB,SAAP,CAAiB0B,UAAjB,CAAP;AACH;;AACD,cAAI,CAAC,KAAKpC,OAAV,EAAmB;AACf,iBAAKqC,cAAL;AACH;;AACD,eAAK7C,OAAL,CAAakB,SAAb,CAAuB0B,UAAvB;;AACAA,oBAAU,CAACN,GAAX,CAAe,YAAM;AAAA,gBACT9B,OADS,GACG,MADH,CACTA,OADS;;AAEjB,gBAAI,MAAI,CAACR,OAAL,CAAa8C,SAAb,CAAuBC,MAAvB,KAAkC,CAAtC,EAAyC;AACrC,kBAAIvC,OAAO,IAAIA,OAAO,CAACiB,UAAR,KAAuB,CAAtC,EAAyC;AACrCjB,uBAAO,CAACkB,KAAR;AACH;;AACD,oBAAI,CAACE,WAAL;AACH;AACJ,WARD;AASA,iBAAOgB,UAAP;AACH;;;sCACa;AAAA,cACFpC,OADE,GACU,IADV,CACFA,OADE;;AAEV,cAAIA,OAAO,IAAIA,OAAO,CAACiB,UAAR,KAAuB,CAAtC,EAAyC;AACrCjB,mBAAO,CAACkB,KAAR;AACH;;AACD,eAAKE,WAAL;;AACA;AACH;;;;MAnMiC,yD,GAqMtC;;;;;;;;;;;;;;;;;;AChNA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AACO,aAASoB,SAAT,CAAmBvD,iBAAnB,EAAsC;AACzC,aAAO,IAAI,kEAAJ,CAAqBA,iBAArB,CAAP;AACH,K,CACD;;;;;;;;;;;;;;;;;;ACJA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,O,CAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGA,QAAMwD,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,qBAAqB;AAAA;AAAA,KAAlC;;AAAaA,yBAAqB,6DAJjC,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIb,QAAaI,cAAc;AAAA;AAAA,KAA3B;;AAAaA,kBAAc,6DAT1B,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,0EAJO,CADD;AAORI,kBAAY,EAAE,CAAC,mDAAD;AAPN,KAAT,CAS0B,GAAdD,cAAc,CAAd;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcf,QAAaE,QAAQ;AA6BnB,wBAAoBC,qBAApB,EACUC,eADV,EAEUC,cAFV,EAE0C;AAAA;;AAFtB,aAAAF,qBAAA,GAAAA,qBAAA;AACV,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AA5BV,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,IAAA,GAAO;AACP;AACEb,cAAI,EAAE,8bAFD;AAGLc,mBAAS,EAAE,OAHN;AAILC,qBAAW,EAAE,CAJR;AAKLC,sBAAY,EAAE,CALT;AAMLC,eAAK,EAAE,IANF;AAOLC,gBAAM,EAAE,IAAIC,MAAM,CAACC,IAAP,CAAYC,KAAhB,CAAsB,GAAtB,EAA2B,GAA3B,CAPH;AAQLC,qBAAW,EAAE,IAAIH,MAAM,CAACC,IAAP,CAAYC,KAAhB,CAAsB,GAAtB,EAA2B,GAA3B,CARR,CAQwC;;AARxC,SAAP;AAWA,aAAAE,OAAA,GAAU,EAAV;AAEA,aAAAC,GAAA,GAAM,CAAC,SAAP;AACA,aAAAC,GAAA,GAAM,CAAC,SAAP;AAIA,aAAAC,WAAA,GAAc,IAAIP,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuB,KAAKH,GAA5B,EAAiC,KAAKC,GAAtC,CAAd;AACA,aAAAG,UAAA,GAAqC;AACnCC,gBAAM,EAAE,KAAKH,WADsB;AAEnCI,cAAI,EAAE;AAF6B,SAArC;AAQ6C;;AA/B1B;AAAA;AAAA,mCAiCR;AAAA;;AACT,eAAKC,OAAL,GAAe,IAAI,uDAAJ,EAAf;AACA,eAAKtB,qBAAL,CAA2BuB,WAA3B,CACGhE,SADH,CACa,UAAAiE,GAAG,EAAI;AAChB,kBAAI,CAACF,OAAL,GAAeE,GAAf;AACAC,mBAAO,CAACC,GAAR,CAAY,MAAI,CAACJ,OAAjB;AAED,WALH;AAMD;AAzCkB;AAAA;AAAA,0CA2CD;AAChB,eAAKK,cAAL,GADgB,CAEhB;AACD;AA9CkB;AAAA;AAAA,yCAgDF;AACf,eAAKC,GAAL,GAAW,IAAIlB,MAAM,CAACC,IAAP,CAAYkB,GAAhB,CAAoB,KAAKC,IAAL,CAAUC,aAA9B,EAA6C,KAAKZ,UAAlD,CAAX;AACA,eAAKa,qBAAL;AACA,eAAKC,aAAL,GAHe,CAIf;AACD;AArDkB;AAAA;AAAA,wCAuDH;AAAA;;AACd,eAAKhC,eAAL,CAAqBiC,SAArB,GAAiC3E,SAAjC,CAA2C,UAAA4E,QAAQ,EAAI;AACrDV,mBAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,mBAAO,CAACC,GAAR,CAAYS,QAAZ;;AAGA,kBAAI,CAAClC,eAAL,CAAqBmC,kBAArB,CAAwC,IAAxC,EAA8C7E,SAA9C,CAAwD,UAAA/B,IAAI,EAAI;AAC9D,oBAAI,CAAC2E,SAAL,GAAiB3E,IAAjB;AACAiG,qBAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,qBAAO,CAACC,GAAR,CAAYlG,IAAZ;;AACA,oBAAI,CAACyE,eAAL,CAAqBoC,MAArB,GAA8B9E,SAA9B,CAAwC,UAAA+E,UAAU,EAAI;AACpDb,uBAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,uBAAO,CAACC,GAAR,CAAYY,UAAZ;;AACA,sBAAI,CAACrC,eAAL,CAAqBsC,OAArB,GAA+BhF,SAA/B,CAAyC,UAAAiF,WAAW,EAAI;AAEtDf,yBAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,yBAAO,CAACC,GAAR,CAAYc,WAAZ;AACA,sBAAMtH,wBAAwB,GAAgC;AAC5DC,uBAAG,EAAE,oCADuD;AAE5DC,gCAAY,EAAE,sBAACC,CAAD;AAAA,6BAAqBC,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACG,IAAb,CAArB;AAAA,qBAF8C;AAG5DC,8BAAU,EAAE,oBAACC,KAAD;AAAA,6BAAgBJ,IAAI,CAACK,SAAL,CAAeD,KAAf,CAAhB;AAAA;AAHgD,mBAA9D;AAMA,sBAAM+G,OAAO,GAAG,iEAAUvH,wBAAV,CAAhB;AAEAuH,yBAAO,CAAClF,SAAR,CACE,UAAAmF,GAAG,EAAI;AACL,wBAAMlH,IAAI,GAAGkH,GAAb;;AAEA,wBAAIlH,IAAI,CAACmH,SAAT,EAAoB;AAClB;AACA,2BAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpH,IAAI,CAACmH,SAAL,CAAevD,MAAnC,EAA2CwD,CAAC,EAA5C,EAAgD;AAC9C,4BAAIC,QAAQ,GAAGrH,IAAI,CAACmH,SAAL,CAAeC,CAAf,CAAf;AACA,4BAAIE,MAAM,GAAG,MAAI,CAAChC,OAAL,CAAa+B,QAAQ,CAACE,QAAtB,CAAb;AACA,4BAAIC,KAAK,GAAG,OAAZ;;AACA,4BAAIC,YAAY,GAAG,MAAI,CAAC9C,SAAL,CAAe+C,MAAf,CAAsB,UAAAC,CAAC;AAAA,iCAAIA,CAAC,CAACC,EAAF,KAASP,QAAQ,CAACE,QAAtB;AAAA,yBAAvB,CAAnB;;AACA,4BAAIE,YAAY,CAAC7D,MAAb,GAAsB,CAA1B,EAA6B;AAC3B4D,+BAAK,GAAGC,YAAY,CAAC,CAAD,CAAZ,CAAgB,YAAhB,EAA8B,iBAA9B,CAAR;AACA,gCAAI,CAAC7C,IAAL,CAAUC,SAAV,GAAsB2C,KAAtB;AACD,yBAHD,MAGO;AACL,gCAAI,CAAC5C,IAAL,CAAUC,SAAV,GAAsB,OAAtB;AACD;;AAGD,4BAAIgD,QAAQ,GAAG,IAAI3C,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuB2B,QAAQ,CAACS,QAAhC,EAA0CT,QAAQ,CAACU,SAAnD,CAAf,CAb8C,CAc9C;;AACA,4BAAI,CAACT,MAAL,EAAa;AACXrB,iCAAO,CAACC,GAAR,CAAY,MAAZ;AAKA,8BAAI8B,CAAC,GAAG,IAAI9C,MAAM,CAACC,IAAP,CAAY8C,MAAhB,CAAuB;AAC7BZ,oCAAQ,EAAEQ,QADmB;AAE7BzB,+BAAG,EAAE,MAAI,CAACA,GAFmB;AAG7B8B,iCAAK,EAAEb,QAAQ,CAACE,QAAT,CAAkBY,QAAlB,EAHsB;AAI7BvD,gCAAI,EAAE,MAAI,CAACA;AAJkB,2BAAvB,CAAR;AAgBA,gCAAI,CAACU,OAAL,CAAa+B,QAAQ,CAACE,QAAtB,IAAkCS,CAAlC;AACD,yBAvBD,MAuBO;AACL;AACA;AAEAV,gCAAM,CAACc,WAAP,CAAmBP,QAAnB,EAJK,CAKL;AACA;AACA;AAKD;AACF;AACF;AAEF,mBA5DH,EA6DE,UAAAjG,GAAG;AAAA,2BAAIqE,OAAO,CAACC,GAAR,CAAYtE,GAAZ,CAAJ;AAAA,mBA7DL,EA6D2B;AACzB;AAAA,2BAAMqE,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAN;AAAA,mBA9DF,CA8DgC;AA9DhC;AAkED,iBA9ED;AAgFD,eAnFD;AAoFD,aAxFD;AA0FD,WA/FD;AAgGD;AAxJkB;AAAA;AAAA,oDA0JSmC,OA1JT,EA0JkBC,OA1JlB,EA0J2B;AAG5C,cAAIC,IAAI,GAAG,KAAKC,gBAAL,CAAsBH,OAAO,CAAC9C,GAAR,EAAtB,CAAX;AACA,cAAIkD,KAAK,GAAG,KAAKD,gBAAL,CAAsBH,OAAO,CAAC7C,GAAR,EAAtB,CAAZ;AACA,cAAIkD,IAAI,GAAG,KAAKF,gBAAL,CAAsBF,OAAO,CAAC/C,GAAR,EAAtB,CAAX;AACA,cAAIoD,KAAK,GAAG,KAAKH,gBAAL,CAAsBF,OAAO,CAAC9C,GAAR,EAAtB,CAAZ;AAGA,cAAIoD,IAAI,GAAID,KAAK,GAAGF,KAApB;AAGA,cAAII,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASH,IAAT,IAAiBE,IAAI,CAACE,GAAL,CAASN,IAAT,CAAzB;AACA,cAAI1G,CAAC,GAAG8G,IAAI,CAACE,GAAL,CAAST,IAAT,IAAiBO,IAAI,CAACC,GAAL,CAASL,IAAT,CAAjB,GAAkCI,IAAI,CAACC,GAAL,CAASR,IAAT,IACtCO,IAAI,CAACE,GAAL,CAASN,IAAT,CADsC,GACrBI,IAAI,CAACE,GAAL,CAASJ,IAAT,CADrB;AAGA,cAAIK,cAAc,GAAGH,IAAI,CAACI,KAAL,CAAWL,CAAX,EAAc7G,CAAd,CAArB;AAGA,iBAAO,KAAKmH,gBAAL,CAAsBF,cAAtB,CAAP;AACD;AA9KkB;AAAA;AAAA,yCAgLFG,OAhLE,EAgLO;AACxB,iBAAOA,OAAO,GAAGN,IAAI,CAACO,EAAf,GAAoB,KAA3B;AACD;AAlLkB;AAAA;AAAA,yCAoLFC,OApLE,EAoLO;AACxB,iBAAOA,OAAO,GAAG,KAAV,GAAkBR,IAAI,CAACO,EAA9B;AACD;AAtLkB;AAAA;AAAA,gDAwLK;AAAA;;AACtB,eAAK3E,cAAL,CAAoB6E,cAApB,CAAmC,KAAKzD,OAAL,CAAa0D,OAAhD,EAAyDzH,SAAzD,CAAmE,UAAA/B,IAAI,EAAI;AACzE,iBAAK,IAAIyJ,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGzJ,IAAI,CAAC4D,MAAjC,EAAyC6F,KAAK,EAA9C,EAAkD;AAChD,kBAAMC,OAAO,GAAG1J,IAAI,CAACyJ,KAAD,CAApB;AACA,kBAAI5B,QAAQ,GAAG,IAAI3C,MAAM,CAACC,IAAP,CAAYO,MAAhB,CAAuBgE,OAAO,CAACC,QAA/B,EAAyCD,OAAO,CAACE,SAAjD,CAAf;AACA,kBAAI1E,MAAM,CAACC,IAAP,CAAY8C,MAAhB,CAAuB;AACrBZ,wBAAQ,EAAEQ,QADW;AAErBzB,mBAAG,EAAE,MAAI,CAACA,GAFW;AAGrB8B,qBAAK,EAAE,cAHc;AAIrBtD,oBAAI,EAAE;AAAEjF,qBAAG,EAAE,6BAAP;AAAsCkK,0BAAQ,EAAE;AAAhD;AAJe,eAAvB;AAMD;AACF,WAXD;AAYD;AArMkB;;AAAA;AAAA,OAArB;;;;cA6B6C;;cAChB;;cACD;;;;AAJW,8DAApC,gEAAU,KAAV,EAAiB;AAAE,gBAAQ;AAAV,KAAjB,CAAoC,G,kBAAA,E,MAAA,E,MAAA;AA3B1BtF,YAAQ,6DALpB,gEAAU;AACTuF,cAAQ,EAAE,UADD;AAETC,cAAQ,EAAR;AAAA;AAAA,wFAFS;;;;AAAA,KAAV,CAKoB,GAARxF,QAAQ,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRb,QAAayF,eAAe;AACxB,+BAAoBC,UAApB,EAA4C;AAAA;;AAAxB,aAAAA,UAAA,GAAAA,UAAA;AAA2B;;AADvB;AAAA;AAAA,uCAKTC,KALS,EAKJ;AAChB,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA,+BAAiB,wBAFI;AAGrB,wBAAU;AAHW,aAAhB;AADO,WAApB;AAOA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA4DF,WAA5D,EAAyEG,IAAzE,CAA8E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA9E,CAAP;AACH;AAjBuB;AAAA;AAAA,2CAmBLN,KAnBK,EAmBA;AACpB,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA;AACA,+BAAiB,wBAHI;AAIrB,wBAAU,qDAJW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA4DF,WAA5D,EAAyEG,IAAzE,CAA8E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA9E,CAAP;AACH;AAlCuB;AAAA;AAAA,kDAoCEN,KApCF,EAoCO;AAC3B,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB,CACrB;AACA;AACA;AACA;AAEA;AANqB,aAAhB;AADO,WAApB,CAD2B,CAW3B;AACD;;AACAnE,iBAAO,CAACC,GAAR,CAAY,uFAAuFgE,KAAK,CAAC3C,QAA7F,GAAuG,aAAvG,GAAuH2C,KAAK,CAACO,UAA7H,GAA0I,aAA1I,GAA0JP,KAAK,CAACQ,OAAhK,GAA0K,WAA1K,GAAyLR,KAAK,CAACS,OAA/L,GAAyM,WAAzM,GAAuNT,KAAK,CAACU,OAAzO;AACC,iBAAO,KAAKX,UAAL,CAAgBI,GAAhB,CAAoB,uFAAuFH,KAAK,CAAC3C,QAA7F,GAAuG,aAAvG,GAAuH2C,KAAK,CAACO,UAA7H,GAA0I,aAA1I,GAA0JP,KAAK,CAACQ,OAAhK,GAA0K,WAA1K,GAAyLR,KAAK,CAACS,OAA/L,GAAyM,WAAzM,GAAuNT,KAAK,CAACU,OAAjP,EAAyPT,WAAzP,EAAsQG,IAAtQ,CAA2Q,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA3Q,CAAP;AACH;AAnDuB;AAAA;AAAA,kCAuDdN,KAvDc,EAuDT;AACX,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DX,KAA7D,EAAmEC,WAAnE,EAAgFG,IAAhF,CAAqF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAArF,CAAP;AACH;AAtEuB;AAAA;AAAA,gCAwEhB5C,EAxEgB,EAwEd;AACN,cAAMuC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,WAAuB,2CAA2CrC,EAAlE,EAAqEuC,WAArE,EAAkFG,IAAlF,CAAuF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAvF,CAAP;AACH;AApFuB;AAAA;AAAA,+BAsFjBN,KAtFiB,EAsFZ;AACR,cAAIA,KAAK,IAAI,IAAb,EAAmB;AACfA,iBAAK,GAAG,EAAR;AACH;;AACD,cAAMC,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB,kBADK;AAErB,+BAAiB,wBAFI;AAGrB,wBAAU,qDAHW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBa,GAAhB,CAAoB,2CAA2CZ,KAAK,CAACtC,EAArE,EAAwEsC,KAAxE,EAA8EC,WAA9E,EAA2FG,IAA3F,CAAgG,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAhG,CAAP;AACH;AArGuB;AAAA;AAAA,oCAuGf;AAEL,cAAML,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACjB,8BAAgB;AADC,aAAhB,CADO;AAIhBW,2BAAe,EAAE;AAJD,WAApB;AAMA,cAAMC,IAAI,GAAG,4BAAb;AACA,iBAAO,KAAKf,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DG,IAA7D,EAAkEb,WAAlE,EAA+EG,IAA/E,CAAoF,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAApF,CAAP;AACH;AAjHuB;AAAA;AAAA,mCAmHhB;AACJ,iBAAO,KAAKP,UAAL,CAAgBI,GAAhB,CAAoB,uCAApB,EAA6DC,IAA7D,CAAkE,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAAlE,CAAP;AACH;AArHuB;AAAA;AAAA,iCAwHlB;AACF,cAAML,WAAW,GAAG;AAChBC,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB;AACA;AACA,+BAAiB,wBAHI;AAIrB,wBAAU,qDAJW,CAMrB;;AANqB,aAAhB;AADO,WAApB;AAUA,iBAAO,KAAKH,UAAL,CAAgBI,GAAhB,CAAoB,sCAApB,EAA2DF,WAA3D,EAAwEG,IAAxE,CAA6E,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAA7E,CAAP;AACH;AApIuB;AAAA;AAAA,kCAuIjB;AAEH;AACA;AAEA,cAAIQ,IAAI,GAAG,4BAAX;AAGA,iBAAO,KAAKf,UAAL,CAAgBY,IAAhB,CAAqB,uCAArB,EAA6DG,IAA7D,EAAkE;AACrEZ,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACrB,8BAAgB;AADK,aAAhB;AAD4D,WAAlE,EAIJE,IAJI,CAIC,kEAAW,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAX,CAJD,CAAP;AAKH;AApJuB;AAAA;AAAA,oCA0JJS,aA1JI,EA0J8B;AAClD,cAAIA,aAAa,CAACpJ,KAAd,YAA+BqJ,UAAnC,EAA+C;AAC3CjF,mBAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC+E,aAAa,CAACpJ,KAAd,CAAoBsJ,OAAvD;AACH,WAFD,MAEO;AACHlF,mBAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC+E,aAAnC;AACH,WALiD,CAMlD;;;AACA,iBAAO,wDAAW,+FAAX,CAAP;AACH;AAlKuB;;AAAA;AAAA,OAA5B;;;;cACoC;;;;AADvBjB,mBAAe,6DAD3B,iEAAW;AAAEoB,gBAAU,EAAE;AAAd,KAAX,CAC2B,GAAfpB,eAAe,CAAf","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-row>\\r\\n      <ion-col>Olá, <font color=\\\"#4cb050\\\"><b>{{this.usuario.user_name}}</b></font><br>\\r\\n             <font size=\\\"4\\\"><b>Acompanhe os caminhões</b></font>\\r\\n    </ion-col>    \\r\\n    </ion-row>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen [scrollEvents]=\\\"true\\\">\\r\\n  <div #map id=\\\"map\\\"></div>\\r\\n</ion-content>\";","import { Subject, AnonymousSubject } from '../../Subject';\nimport { Subscriber } from '../../Subscriber';\nimport { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { ReplaySubject } from '../../ReplaySubject';\nconst DEFAULT_WEBSOCKET_CONFIG = {\n    url: '',\n    deserializer: (e) => JSON.parse(e.data),\n    serializer: (value) => JSON.stringify(value),\n};\nconst WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT = 'WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }';\nexport class WebSocketSubject extends AnonymousSubject {\n    constructor(urlConfigOrSource, destination) {\n        super();\n        if (urlConfigOrSource instanceof Observable) {\n            this.destination = destination;\n            this.source = urlConfigOrSource;\n        }\n        else {\n            const config = this._config = Object.assign({}, DEFAULT_WEBSOCKET_CONFIG);\n            this._output = new Subject();\n            if (typeof urlConfigOrSource === 'string') {\n                config.url = urlConfigOrSource;\n            }\n            else {\n                for (let key in urlConfigOrSource) {\n                    if (urlConfigOrSource.hasOwnProperty(key)) {\n                        config[key] = urlConfigOrSource[key];\n                    }\n                }\n            }\n            if (!config.WebSocketCtor && WebSocket) {\n                config.WebSocketCtor = WebSocket;\n            }\n            else if (!config.WebSocketCtor) {\n                throw new Error('no WebSocket constructor can be found');\n            }\n            this.destination = new ReplaySubject();\n        }\n    }\n    lift(operator) {\n        const sock = new WebSocketSubject(this._config, this.destination);\n        sock.operator = operator;\n        sock.source = this;\n        return sock;\n    }\n    _resetState() {\n        this._socket = null;\n        if (!this.source) {\n            this.destination = new ReplaySubject();\n        }\n        this._output = new Subject();\n    }\n    multiplex(subMsg, unsubMsg, messageFilter) {\n        const self = this;\n        return new Observable((observer) => {\n            try {\n                self.next(subMsg());\n            }\n            catch (err) {\n                observer.error(err);\n            }\n            const subscription = self.subscribe(x => {\n                try {\n                    if (messageFilter(x)) {\n                        observer.next(x);\n                    }\n                }\n                catch (err) {\n                    observer.error(err);\n                }\n            }, err => observer.error(err), () => observer.complete());\n            return () => {\n                try {\n                    self.next(unsubMsg());\n                }\n                catch (err) {\n                    observer.error(err);\n                }\n                subscription.unsubscribe();\n            };\n        });\n    }\n    _connectSocket() {\n        const { WebSocketCtor, protocol, url, binaryType } = this._config;\n        const observer = this._output;\n        let socket = null;\n        try {\n            socket = protocol ?\n                new WebSocketCtor(url, protocol) :\n                new WebSocketCtor(url);\n            this._socket = socket;\n            if (binaryType) {\n                this._socket.binaryType = binaryType;\n            }\n        }\n        catch (e) {\n            observer.error(e);\n            return;\n        }\n        const subscription = new Subscription(() => {\n            this._socket = null;\n            if (socket && socket.readyState === 1) {\n                socket.close();\n            }\n        });\n        socket.onopen = (e) => {\n            const { _socket } = this;\n            if (!_socket) {\n                socket.close();\n                this._resetState();\n                return;\n            }\n            const { openObserver } = this._config;\n            if (openObserver) {\n                openObserver.next(e);\n            }\n            const queue = this.destination;\n            this.destination = Subscriber.create((x) => {\n                if (socket.readyState === 1) {\n                    try {\n                        const { serializer } = this._config;\n                        socket.send(serializer(x));\n                    }\n                    catch (e) {\n                        this.destination.error(e);\n                    }\n                }\n            }, (e) => {\n                const { closingObserver } = this._config;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                if (e && e.code) {\n                    socket.close(e.code, e.reason);\n                }\n                else {\n                    observer.error(new TypeError(WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT));\n                }\n                this._resetState();\n            }, () => {\n                const { closingObserver } = this._config;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                socket.close();\n                this._resetState();\n            });\n            if (queue && queue instanceof ReplaySubject) {\n                subscription.add(queue.subscribe(this.destination));\n            }\n        };\n        socket.onerror = (e) => {\n            this._resetState();\n            observer.error(e);\n        };\n        socket.onclose = (e) => {\n            this._resetState();\n            const { closeObserver } = this._config;\n            if (closeObserver) {\n                closeObserver.next(e);\n            }\n            if (e.wasClean) {\n                observer.complete();\n            }\n            else {\n                observer.error(e);\n            }\n        };\n        socket.onmessage = (e) => {\n            try {\n                const { deserializer } = this._config;\n                observer.next(deserializer(e));\n            }\n            catch (err) {\n                observer.error(err);\n            }\n        };\n    }\n    _subscribe(subscriber) {\n        const { source } = this;\n        if (source) {\n            return source.subscribe(subscriber);\n        }\n        if (!this._socket) {\n            this._connectSocket();\n        }\n        this._output.subscribe(subscriber);\n        subscriber.add(() => {\n            const { _socket } = this;\n            if (this._output.observers.length === 0) {\n                if (_socket && _socket.readyState === 1) {\n                    _socket.close();\n                }\n                this._resetState();\n            }\n        });\n        return subscriber;\n    }\n    unsubscribe() {\n        const { _socket } = this;\n        if (_socket && _socket.readyState === 1) {\n            _socket.close();\n        }\n        this._resetState();\n        super.unsubscribe();\n    }\n}\n//# sourceMappingURL=WebSocketSubject.js.map","import { WebSocketSubject } from './WebSocketSubject';\nexport function webSocket(urlConfigOrSource) {\n    return new WebSocketSubject(urlConfigOrSource);\n}\n//# sourceMappingURL=webSocket.js.map","export { webSocket as webSocket } from '../internal/observable/dom/webSocket';\nexport { WebSocketSubject } from '../internal/observable/dom/WebSocketSubject';\n//# sourceMappingURL=index.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\n\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","export default \"#map {\\n  height: 100%;\\n}\\n\\nion-menu-button {\\n  color: #FFFFFF;\\n  --background: #4cb050;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXEx1Y2FzXFxEb2N1bWVudHNcXFByb2pldG9zXFxob3JhLWRvLWxpeG9cXGFwcDJcXGFwcDIvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQ0NKOztBRENFO0VBQ0UsY0FBQTtFQUNBLHFCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgfVxyXG4gIGlvbi1tZW51LWJ1dHRvbntcclxuICAgIGNvbG9yOiAjRkZGRkZGO1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjNGNiMDUwO1xyXG4gIH0iLCIjbWFwIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG5pb24tbWVudS1idXR0b24ge1xuICBjb2xvcjogI0ZGRkZGRjtcbiAgLS1iYWNrZ3JvdW5kOiAjNGNiMDUwO1xufSJdfQ== */\";","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { Usuario } from '../models/usuario';\nimport { AuthenticationService } from '../services/auth/authentication.service';\nimport { google } from \"google-maps\";\nimport { CaminhaoService } from '../services/caminhao/caminhao.service';\nimport { webSocket, WebSocketSubjectConfig } from \"rxjs/webSocket\";\nimport { WebSocketServer } from '@ionic-native/web-socket-server';\nimport { UsuarioService } from '../services/usuario/usuario.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  public usuario: Usuario;\n\n  caminhoes = [];\n  icon = {\n  //  path: \"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z\", //SVG path of awesomefont marker\n    path: \"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z\",\n    fillColor: 'green', //color of the marker\n    fillOpacity: 1,\n    strokeWeight: 0,\n    scale: 0.05, //size of the marker, careful! this scale also affects anchor and labelOrigin\n    anchor: new google.maps.Point(200, 510), //position of the icon, careful! this is affected by scale\n    labelOrigin: new google.maps.Point(205, 190) //position of the label, careful! this is affected by scale\n  };\n\n  markers = [];\n  marker: google.maps.Marker;\n  lat = -20.672310;\n  lng = -43.771140;\n  map: google.maps.Map;\n  currentLat: any;\n  currentLong: any;\n  coordinates = new google.maps.LatLng(this.lat, this.lng);\n  mapOptions: google.maps.MapOptions = {\n    center: this.coordinates,\n    zoom: 14\n  };\n  @ViewChild('map', { static: false }) gmap: ElementRef;\n\n  constructor(private authenticationService: AuthenticationService,\n    private caminhaoService: CaminhaoService,\n    private usuarioService: UsuarioService) { }\n\n  ngOnInit() {\n    this.usuario = new Usuario();\n    this.authenticationService.currentUser\n      .subscribe(arg => {\n        this.usuario = arg;\n        console.log(this.usuario);\n\n      });\n  }\n\n  ngAfterViewInit() {\n    this.mapInitializer();\n    //this.buscarCaminhao();\n  }\n\n  mapInitializer() {\n    this.map = new google.maps.Map(this.gmap.nativeElement, this.mapOptions);\n    this.listarEnderecoUsuario();\n    this.caminhaoStart();\n    //this.findMe();\n  }\n\n  caminhaoStart() {\n    this.caminhaoService.TrackPost().subscribe(datapost => {\n      console.log(\"POST\");\n      console.log(datapost);\n\n\n      this.caminhaoService.BuscarDispositivos(null).subscribe(data => {\n        this.caminhoes = data;\n        console.log(\"caminhoes\");\n        console.log(data);\n        this.caminhaoService.Server().subscribe(dataServer => {\n          console.log(\"server\");\n          console.log(dataServer);\n          this.caminhaoService.Session().subscribe(dataSession => {\n\n            console.log(\"sessão\");\n            console.log(dataSession);\n            const DEFAULT_WEBSOCKET_CONFIG: WebSocketSubjectConfig<any> = {\n              url: 'ws://horadolixo.ml:8082/api/socket',\n              deserializer: (e: MessageEvent) => JSON.parse(e.data),\n              serializer: (value: any) => JSON.stringify(value),\n            };\n\n            const subject = webSocket(DEFAULT_WEBSOCKET_CONFIG);\n\n            subject.subscribe(\n              msg => {\n                const data = msg\n\n                if (data.positions) {\n                  // console.log(data);\n                  for (let i = 0; i < data.positions.length; i++) {\n                    var position = data.positions[i];\n                    let marker = this.markers[position.deviceId];\n                    let color = 'green';\n                    let caminhaoItem = this.caminhoes.filter(c => c.id === position.deviceId);\n                    if (caminhaoItem.length > 0) {\n                      color = caminhaoItem[0][\"attributes\"]['web.reportColor'];\n                      this.icon.fillColor = color;\n                    } else {\n                      this.icon.fillColor = 'green';\n                    }\n\n\n                    let location = new google.maps.LatLng(position.latitude, position.longitude);\n                    // console.log(this.markers);\n                    if (!marker) {\n                      console.log(\"novo\");\n\n\n\n    \n                      let m = new google.maps.Marker({\n                        position: location,\n                        map: this.map,\n                        title: position.deviceId.toString(),\n                        icon: this.icon,\n                        \n                        // icon: { url: './assets/imgs/caminhao1.png', rotation: 0 },\n                       \n                        // label: {\n                        //   fontFamily: \"'Font Awesome 5 Free'\",\n                        //   text: '\\uf0d1', //icon code\n                        //  //text: 'Oi',\n                        //   fontWeight: '900', //careful! some icons in FA5 only exist for specific font weights\n                        //   color: '#FFFFFF', //color of the text inside marker\n                        // }\n                      });\n                      this.markers[position.deviceId] = m;\n                    } else {\n                      // console.log(\"atualizou\");\n                      // let locationAntiga = new google.maps.LatLng(marker.position.lat(), marker.position.lng());\n\n                      marker.setPosition(location);\n                      //  marker.setRotation(10,10);\n                      //this.getBearingBetweenTwoPoints1(locationAntiga, location)\n                      //  console.log(this.getBearingBetweenTwoPoints1(locationAntiga, location));\n\n\n\n\n                    }\n                  }\n                }\n\n              },\n              err => console.log(err), // Called if at any point WebSocket API signals some kind of error.\n              () => console.log('complete') // Called when connection is closed (for whatever reason).\n            );\n\n\n          });\n\n        });\n      });\n\n    });\n  }\n\n  getBearingBetweenTwoPoints1(latLng1, latLng2) {\n\n\n    let lat1 = this.degreesToRadians(latLng1.lat());\n    let long1 = this.degreesToRadians(latLng1.lng());\n    let lat2 = this.degreesToRadians(latLng2.lat());\n    let long2 = this.degreesToRadians(latLng2.lng());\n\n\n    let dLon = (long2 - long1);\n\n\n    let y = Math.sin(dLon) * Math.cos(lat2);\n    let x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1)\n      * Math.cos(lat2) * Math.cos(dLon);\n\n    let radiansBearing = Math.atan2(y, x);\n\n\n    return this.radiansToDegrees(radiansBearing);\n  }\n\n  degreesToRadians(degrees) {\n    return degrees * Math.PI / 180.0;\n  }\n\n  radiansToDegrees(radians) {\n    return radians * 180.0 / Math.PI;\n  }\n\n  listarEnderecoUsuario() {\n    this.usuarioService.ListarEndereco(this.usuario.user_id).subscribe(data => {\n      for (let index = 0; index < data.length; index++) {\n        const element = data[index];\n        let location = new google.maps.LatLng(element.addr_lat, element.addr_long);\n        new google.maps.Marker({\n          position: location,\n          map: this.map,\n          title: \"Meu Endereço\",\n          icon: { url: './assets/imgs/green-dot.png', rotation: 0 }\n        });\n      }\n    });\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CaminhaoService {\r\n    constructor(private httpClient: HttpClient) { }\r\n\r\n    etapa1Model;\r\n\r\n    BuscarCaminhao(model): Observable<any> {\r\n        if (model == null) {\r\n            model = {}\r\n        }\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                //'Content-Type': 'application/json',\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n            }),\r\n        };\r\n        return this.httpClient.get('http://horadolixo.ml:8082/api/devices',httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    BuscarDispositivos(model): Observable<any> {\r\n        if (model == null) {\r\n            model = {}\r\n        }\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                //'Content-Type': 'application/json',\r\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        return this.httpClient.get('http://horadolixo.ml:8082/api/devices',httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    BuscarCaminhaoCoordenadas(model){\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                //'Content-Type': 'application/json',\r\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\r\n                //\"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                //\"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        //return this.httpClient.get('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=17&startDate=2020-05-05&startTime=00:00:00&endDate=2020-05-05&endTime=23:59:59',httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n       // console.log('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=00:00:00&endDate=' +  model.dataFim + '&endTime=23:59:59');\r\n       console.log('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=' + model.timeIni + '&endDate=' +  model.dataFim + '&endTime=' + model.timeFim);\r\n        return this.httpClient.get('http://horadolixo.ml/painel/ws/positions.php?auth=AKur0On8iWjP2OmasopsZA&deviceid=' + model.deviceId +'&startDate=' + model.dataInicio + '&startTime=' + model.timeIni + '&endDate=' +  model.dataFim + '&endTime=' + model.timeFim,httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n  \r\n    \r\n    Cadastrar(model): Observable<any> {\r\n        if (model == null) {\r\n            model = {}\r\n        }\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        return this.httpClient.post('http://horadolixo.ml:8082/api/devices',model,httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    Deletar(id): Observable<any> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        return this.httpClient.delete('http://horadolixo.ml:8082/api/devices/' + id,httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    Editar(model): Observable<any> {\r\n        if (model == null) {\r\n            model = {}\r\n        }\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        return this.httpClient.put('http://horadolixo.ml:8082/api/devices/' + model.id,model,httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    TrackPost(): Observable<any> {\r\n       \r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                    \"content-type\": \"application/x-www-form-urlencoded\"\r\n            }),\r\n            withCredentials: true\r\n        };\r\n        const body = 'email=admin&password=admin';\r\n        return this.httpClient.post('http://horadolixo.ml:8082/api/session',body,httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    TrackGet(): Observable<any> {\r\n        return this.httpClient.get('http://horadolixo.ml:8082/api/session').pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n    \r\n    Server(): Observable<any> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                //'Content-Type': 'application/json',\r\n                // 'Authorization': 'Basic ' + btoa('admin' + ':' + 'admin')\r\n                \"Authorization\": \"Basic YWRtaW46YWRtaW4=\",\r\n                \"Cookie\": \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\"\r\n\r\n                //.addHeader(\"Cookie\", \"JSESSIONID=node01wqhgixln03l91w82qe2gb3rac108.node0\")\r\n            }),\r\n        };\r\n        return this.httpClient.get('http://horadolixo.ml:8082/api/server',httpOptions).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n        \r\n    Session(): Observable<any> {\r\n       \r\n        // const header = new Headers();\r\n        // header.append('Content-Type', 'application/x-www-form-urlencoded');\r\n\r\n        let body = 'email=admin&password=admin';\r\n      \r\n    \r\n        return this.httpClient.post('http://horadolixo.ml:8082/api/session',body,{\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            })\r\n        }).pipe(catchError(this.handleError.bind(this)));\r\n    }\r\n\r\n\r\n\r\n    \r\n\r\n    private handleError(errorResponse: HttpErrorResponse) {\r\n        if (errorResponse.error instanceof ErrorEvent) {\r\n            console.log('Client Side Error :', errorResponse.error.message);\r\n        } else {\r\n            console.log('Server Side Error :', errorResponse);\r\n        }\r\n        // return an observable with a meaningful error message to the end user\r\n        return throwError('There is a problem with the service. We are notified & working on it. Please try again later.');\r\n    }\r\n\r\n}"]}